{"ast":null,"code":"import{useState,useEffect,useRef}from'react';import axios from'axios';import{API}from'../App';import{useParams,useNavigate}from'react-router-dom';import{Button}from'../components/ui/button';import{Card,CardHeader,CardContent}from'../components/ui/card';import{Input}from'../components/ui/input';import{Tabs,TabsContent,TabsList,TabsTrigger}from'../components/ui/tabs';import{toast}from'sonner';import{ArrowLeft,FileText,MessageSquare,Sparkles,Mic,Volume2,Send,Download}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PDFViewer(_ref){var _pdf$text_content;let{user,onLogout}=_ref;const{pdfId}=useParams();const navigate=useNavigate();const[pdf,setPdf]=useState(null);const[summaries,setSummaries]=useState([]);const[loading,setLoading]=useState(true);const[summarizing,setSummarizing]=useState(false);const[chatMessage,setChatMessage]=useState('');const[chatMessages,setChatMessages]=useState([]);const[sessionId]=useState(()=>\"session-\".concat(Date.now()));const[isRecording,setIsRecording]=useState(false);const[isSpeaking,setIsSpeaking]=useState(false);const mediaRecorderRef=useRef(null);const chatEndRef=useRef(null);useEffect(()=>{fetchPDF();fetchSummaries();fetchChatHistory();},[pdfId]);useEffect(()=>{var _chatEndRef$current;(_chatEndRef$current=chatEndRef.current)===null||_chatEndRef$current===void 0?void 0:_chatEndRef$current.scrollIntoView({behavior:'smooth'});},[chatMessages]);const fetchPDF=async()=>{try{const response=await axios.get(\"\".concat(API,\"/pdf/\").concat(pdfId));setPdf(response.data);}catch(error){toast.error('Failed to fetch PDF');navigate('/');}finally{setLoading(false);}};const fetchSummaries=async()=>{try{const response=await axios.get(\"\".concat(API,\"/summaries/\").concat(pdfId));setSummaries(response.data);}catch(error){console.error('Failed to fetch summaries');}};const fetchChatHistory=async()=>{try{const response=await axios.get(\"\".concat(API,\"/chat/history/\").concat(pdfId,\"?session_id=\").concat(sessionId));if(response.data.messages){setChatMessages(response.data.messages);}}catch(error){console.error('Failed to fetch chat history');}};const handleSummarize=async mode=>{setSummarizing(true);try{const response=await axios.post(\"\".concat(API,\"/summarize\"),{pdf_id:pdfId,mode,length:mode==='custom'?200:null});setSummaries([response.data,...summaries]);toast.success('Summary generated successfully!');}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||'Failed to generate summary');}finally{setSummarizing(false);}};const handleChat=async message=>{if(!message.trim())return;const userMessage={user:message,timestamp:new Date().toISOString()};setChatMessages([...chatMessages,userMessage]);setChatMessage('');try{const response=await axios.post(\"\".concat(API,\"/chat\"),{pdf_id:pdfId,message,session_id:sessionId});const assistantMessage={assistant:response.data.response,timestamp:new Date().toISOString()};setChatMessages(prev=>[...prev,assistantMessage]);}catch(error){toast.error('Failed to get response');setChatMessages(prev=>prev.slice(0,-1));}};const startRecording=async()=>{try{const stream=await navigator.mediaDevices.getUserMedia({audio:true});const mediaRecorder=new MediaRecorder(stream);const audioChunks=[];mediaRecorder.ondataavailable=event=>{audioChunks.push(event.data);};mediaRecorder.onstop=async()=>{const audioBlob=new Blob(audioChunks,{type:'audio/webm'});const formData=new FormData();formData.append('file',audioBlob,'recording.webm');try{const response=await axios.post(\"\".concat(API,\"/voice/transcribe\"),formData,{headers:{'Content-Type':'multipart/form-data'}});setChatMessage(response.data.text);toast.success('Transcription complete!');}catch(error){toast.error('Failed to transcribe audio');}stream.getTracks().forEach(track=>track.stop());};mediaRecorder.start();mediaRecorderRef.current=mediaRecorder;setIsRecording(true);}catch(error){toast.error('Failed to access microphone');}};const stopRecording=()=>{if(mediaRecorderRef.current&&isRecording){mediaRecorderRef.current.stop();setIsRecording(false);}};const speakText=text=>{if('speechSynthesis'in window){const utterance=new SpeechSynthesisUtterance(text);utterance.onstart=()=>setIsSpeaking(true);utterance.onend=()=>setIsSpeaking(false);window.speechSynthesis.speak(utterance);}else{toast.error('Text-to-speech not supported');}};const exportSummary=summary=>{const element=document.createElement('a');const file=new Blob([summary.content],{type:'text/plain'});element.href=URL.createObjectURL(file);element.download=\"summary-\".concat(summary.summary_type,\".txt\");document.body.appendChild(element);element.click();document.body.removeChild(element);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"glass-effect shadow-sm border-b border-white/20\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(Button,{onClick:()=>navigate('/'),\"data-testid\":\"back-to-dashboard\",variant:\"outline\",className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"w-4 h-4\"}),\"Back\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(FileText,{className:\"w-6 h-6 text-indigo-600\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-gray-800\",\"data-testid\":\"pdf-title\",children:pdf===null||pdf===void 0?void 0:pdf.filename})]})]})})}),/*#__PURE__*/_jsx(\"main\",{className:\"max-w-7xl mx-auto px-4 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-2 space-y-6\",children:/*#__PURE__*/_jsxs(Tabs,{defaultValue:\"summary\",className:\"w-full\",children:[/*#__PURE__*/_jsxs(TabsList,{className:\"grid w-full grid-cols-2 glass-effect\",children:[/*#__PURE__*/_jsx(TabsTrigger,{value:\"summary\",\"data-testid\":\"summary-tab\",children:\"Summary\"}),/*#__PURE__*/_jsx(TabsTrigger,{value:\"chat\",\"data-testid\":\"chat-tab\",children:\"Chat\"})]}),/*#__PURE__*/_jsx(TabsContent,{value:\"summary\",children:/*#__PURE__*/_jsxs(Card,{className:\"glass-effect shadow-xl\",children:[/*#__PURE__*/_jsxs(CardHeader,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800\",children:\"Generate Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 mt-4\",children:[/*#__PURE__*/_jsxs(Button,{onClick:()=>handleSummarize('brief'),\"data-testid\":\"brief-summary-button\",disabled:summarizing,className:\"btn-primary text-white\",children:[/*#__PURE__*/_jsx(Sparkles,{className:\"w-4 h-4 mr-2\"}),\"Brief Summary\"]}),/*#__PURE__*/_jsxs(Button,{onClick:()=>handleSummarize('detailed'),\"data-testid\":\"detailed-summary-button\",disabled:summarizing,className:\"btn-secondary text-white\",children:[/*#__PURE__*/_jsx(Sparkles,{className:\"w-4 h-4 mr-2\"}),\"Detailed Summary\"]}),/*#__PURE__*/_jsxs(Button,{onClick:()=>handleSummarize('custom'),\"data-testid\":\"custom-summary-button\",disabled:summarizing,variant:\"outline\",children:[/*#__PURE__*/_jsx(Sparkles,{className:\"w-4 h-4 mr-2\"}),\"Custom (200 words)\"]})]})]}),/*#__PURE__*/_jsxs(CardContent,{children:[summarizing&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-3 text-gray-600\",children:\"Generating summary...\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",\"data-testid\":\"summaries-container\",children:summaries.map(summary=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-white/50 rounded-lg border border-indigo-200\",\"data-testid\":\"summary-\".concat(summary.id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-indigo-600 uppercase\",children:summary.summary_type}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",onClick:()=>speakText(summary.content),\"data-testid\":\"speak-summary-\".concat(summary.id),children:/*#__PURE__*/_jsx(Volume2,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",onClick:()=>exportSummary(summary),\"data-testid\":\"export-summary-\".concat(summary.id),children:/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4\"})})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 whitespace-pre-wrap\",children:summary.content}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-2\",children:new Date(summary.created_at).toLocaleString()})]},summary.id))})]})]})}),/*#__PURE__*/_jsx(TabsContent,{value:\"chat\",children:/*#__PURE__*/_jsxs(Card,{className:\"glass-effect shadow-xl\",children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800\",children:\"Chat with Document\"})}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 h-96 overflow-y-auto mb-4\",\"data-testid\":\"chat-messages\",children:[chatMessages.map((msg,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"chat-message\",children:[msg.user&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end mb-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-indigo-600 text-white px-4 py-2 rounded-2xl rounded-tr-sm max-w-md\",\"data-testid\":\"user-message\",children:msg.user})}),msg.assistant&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-start mb-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white/70 text-gray-800 px-4 py-2 rounded-2xl rounded-tl-sm max-w-md shadow-sm\",\"data-testid\":\"assistant-message\",children:msg.assistant})})]},idx)),/*#__PURE__*/_jsx(\"div\",{ref:chatEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{onClick:isRecording?stopRecording:startRecording,\"data-testid\":\"voice-input-button\",variant:\"outline\",className:isRecording?'bg-red-100':'',children:/*#__PURE__*/_jsx(Mic,{className:\"w-4 h-4 \".concat(isRecording?'text-red-600':'')})}),/*#__PURE__*/_jsx(Input,{value:chatMessage,onChange:e=>setChatMessage(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleChat(chatMessage),placeholder:\"Ask a question about the document...\",\"data-testid\":\"chat-input\",className:\"flex-1\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>handleChat(chatMessage),\"data-testid\":\"send-chat-button\",className:\"btn-primary text-white\",children:/*#__PURE__*/_jsx(Send,{className:\"w-4 h-4\"})})]})]})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(Card,{className:\"glass-effect shadow-xl\",\"data-testid\":\"document-info\",children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800\",children:\"Document Info\"})}),/*#__PURE__*/_jsxs(CardContent,{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Filename\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-800\",children:pdf===null||pdf===void 0?void 0:pdf.filename})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Pages\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-800\",children:pdf===null||pdf===void 0?void 0:pdf.page_count})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Uploaded\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-800\",children:(pdf===null||pdf===void 0?void 0:pdf.upload_date)&&new Date(pdf.upload_date).toLocaleString()})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Size\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-800\",children:[(pdf===null||pdf===void 0?void 0:pdf.file_size)&&(pdf.file_size/1024).toFixed(2),\" KB\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Status\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-green-600 capitalize\",children:pdf===null||pdf===void 0?void 0:pdf.status})]})]})]}),/*#__PURE__*/_jsxs(Card,{className:\"glass-effect shadow-xl\",children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800\",children:\"Document Preview\"})}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white/50 p-4 rounded-lg border border-indigo-200 max-h-96 overflow-y-auto\",\"data-testid\":\"document-preview\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-700 whitespace-pre-wrap\",children:[pdf===null||pdf===void 0?void 0:(_pdf$text_content=pdf.text_content)===null||_pdf$text_content===void 0?void 0:_pdf$text_content.substring(0,1000),\"...\"]})})})]})]})]})})]});}","map":{"version":3,"names":["useState","useEffect","useRef","axios","API","useParams","useNavigate","Button","Card","CardHeader","CardContent","Input","Tabs","TabsContent","TabsList","TabsTrigger","toast","ArrowLeft","FileText","MessageSquare","Sparkles","Mic","Volume2","Send","Download","jsx","_jsx","jsxs","_jsxs","PDFViewer","_ref","_pdf$text_content","user","onLogout","pdfId","navigate","pdf","setPdf","summaries","setSummaries","loading","setLoading","summarizing","setSummarizing","chatMessage","setChatMessage","chatMessages","setChatMessages","sessionId","concat","Date","now","isRecording","setIsRecording","isSpeaking","setIsSpeaking","mediaRecorderRef","chatEndRef","fetchPDF","fetchSummaries","fetchChatHistory","_chatEndRef$current","current","scrollIntoView","behavior","response","get","data","error","console","messages","handleSummarize","mode","post","pdf_id","length","success","_error$response","_error$response$data","detail","handleChat","message","trim","userMessage","timestamp","toISOString","session_id","assistantMessage","assistant","prev","slice","startRecording","stream","navigator","mediaDevices","getUserMedia","audio","mediaRecorder","MediaRecorder","audioChunks","ondataavailable","event","push","onstop","audioBlob","Blob","type","formData","FormData","append","headers","text","getTracks","forEach","track","stop","start","stopRecording","speakText","window","utterance","SpeechSynthesisUtterance","onstart","onend","speechSynthesis","speak","exportSummary","summary","element","document","createElement","file","content","href","URL","createObjectURL","download","summary_type","body","appendChild","click","removeChild","className","children","onClick","variant","filename","defaultValue","value","disabled","map","id","size","created_at","toLocaleString","msg","idx","ref","onChange","e","target","onKeyPress","key","placeholder","page_count","upload_date","file_size","toFixed","status","text_content","substring"],"sources":["C:/Brevix/frontend/src/pages/PDFViewer.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { API } from '../App';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Button } from '../components/ui/button';\nimport { Card, CardHeader, CardContent } from '../components/ui/card';\nimport { Input } from '../components/ui/input';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '../components/ui/tabs';\nimport { toast } from 'sonner';\nimport { ArrowLeft, FileText, MessageSquare, Sparkles, Mic, Volume2, Send, Download } from 'lucide-react';\n\nexport default function PDFViewer({ user, onLogout }) {\n  const { pdfId } = useParams();\n  const navigate = useNavigate();\n  const [pdf, setPdf] = useState(null);\n  const [summaries, setSummaries] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [summarizing, setSummarizing] = useState(false);\n  const [chatMessage, setChatMessage] = useState('');\n  const [chatMessages, setChatMessages] = useState([]);\n  const [sessionId] = useState(() => `session-${Date.now()}`);\n  const [isRecording, setIsRecording] = useState(false);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const mediaRecorderRef = useRef(null);\n  const chatEndRef = useRef(null);\n\n  useEffect(() => {\n    fetchPDF();\n    fetchSummaries();\n    fetchChatHistory();\n  }, [pdfId]);\n\n  useEffect(() => {\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [chatMessages]);\n\n  const fetchPDF = async () => {\n    try {\n      const response = await axios.get(`${API}/pdf/${pdfId}`);\n      setPdf(response.data);\n    } catch (error) {\n      toast.error('Failed to fetch PDF');\n      navigate('/');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchSummaries = async () => {\n    try {\n      const response = await axios.get(`${API}/summaries/${pdfId}`);\n      setSummaries(response.data);\n    } catch (error) {\n      console.error('Failed to fetch summaries');\n    }\n  };\n\n  const fetchChatHistory = async () => {\n    try {\n      const response = await axios.get(`${API}/chat/history/${pdfId}?session_id=${sessionId}`);\n      if (response.data.messages) {\n        setChatMessages(response.data.messages);\n      }\n    } catch (error) {\n      console.error('Failed to fetch chat history');\n    }\n  };\n\n  const handleSummarize = async (mode) => {\n    setSummarizing(true);\n    try {\n      const response = await axios.post(`${API}/summarize`, {\n        pdf_id: pdfId,\n        mode,\n        length: mode === 'custom' ? 200 : null,\n      });\n      setSummaries([response.data, ...summaries]);\n      toast.success('Summary generated successfully!');\n    } catch (error) {\n      toast.error(error.response?.data?.detail || 'Failed to generate summary');\n    } finally {\n      setSummarizing(false);\n    }\n  };\n\n  const handleChat = async (message) => {\n    if (!message.trim()) return;\n\n    const userMessage = { user: message, timestamp: new Date().toISOString() };\n    setChatMessages([...chatMessages, userMessage]);\n    setChatMessage('');\n\n    try {\n      const response = await axios.post(`${API}/chat`, {\n        pdf_id: pdfId,\n        message,\n        session_id: sessionId,\n      });\n      const assistantMessage = {\n        assistant: response.data.response,\n        timestamp: new Date().toISOString(),\n      };\n      setChatMessages((prev) => [...prev, assistantMessage]);\n    } catch (error) {\n      toast.error('Failed to get response');\n      setChatMessages((prev) => prev.slice(0, -1));\n    }\n  };\n\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      const mediaRecorder = new MediaRecorder(stream);\n      const audioChunks = [];\n\n      mediaRecorder.ondataavailable = (event) => {\n        audioChunks.push(event.data);\n      };\n\n      mediaRecorder.onstop = async () => {\n        const audioBlob = new Blob(audioChunks, { type: 'audio/webm' });\n        const formData = new FormData();\n        formData.append('file', audioBlob, 'recording.webm');\n\n        try {\n          const response = await axios.post(`${API}/voice/transcribe`, formData, {\n            headers: { 'Content-Type': 'multipart/form-data' },\n          });\n          setChatMessage(response.data.text);\n          toast.success('Transcription complete!');\n        } catch (error) {\n          toast.error('Failed to transcribe audio');\n        }\n\n        stream.getTracks().forEach((track) => track.stop());\n      };\n\n      mediaRecorder.start();\n      mediaRecorderRef.current = mediaRecorder;\n      setIsRecording(true);\n    } catch (error) {\n      toast.error('Failed to access microphone');\n    }\n  };\n\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      setIsRecording(false);\n    }\n  };\n\n  const speakText = (text) => {\n    if ('speechSynthesis' in window) {\n      const utterance = new SpeechSynthesisUtterance(text);\n      utterance.onstart = () => setIsSpeaking(true);\n      utterance.onend = () => setIsSpeaking(false);\n      window.speechSynthesis.speak(utterance);\n    } else {\n      toast.error('Text-to-speech not supported');\n    }\n  };\n\n  const exportSummary = (summary) => {\n    const element = document.createElement('a');\n    const file = new Blob([summary.content], { type: 'text/plain' });\n    element.href = URL.createObjectURL(file);\n    element.download = `summary-${summary.summary_type}.txt`;\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50\">\n      {/* Header */}\n      <header className=\"glass-effect shadow-sm border-b border-white/20\">\n        <div className=\"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <Button\n              onClick={() => navigate('/')}\n              data-testid=\"back-to-dashboard\"\n              variant=\"outline\"\n              className=\"flex items-center gap-2\"\n            >\n              <ArrowLeft className=\"w-4 h-4\" />\n              Back\n            </Button>\n            <div className=\"flex items-center gap-3\">\n              <FileText className=\"w-6 h-6 text-indigo-600\" />\n              <h1 className=\"text-xl font-bold text-gray-800\" data-testid=\"pdf-title\">{pdf?.filename}</h1>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto px-4 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          {/* Left Panel - Summary & Chat */}\n          <div className=\"lg:col-span-2 space-y-6\">\n            <Tabs defaultValue=\"summary\" className=\"w-full\">\n              <TabsList className=\"grid w-full grid-cols-2 glass-effect\">\n                <TabsTrigger value=\"summary\" data-testid=\"summary-tab\">Summary</TabsTrigger>\n                <TabsTrigger value=\"chat\" data-testid=\"chat-tab\">Chat</TabsTrigger>\n              </TabsList>\n\n              {/* Summary Tab */}\n              <TabsContent value=\"summary\">\n                <Card className=\"glass-effect shadow-xl\">\n                  <CardHeader>\n                    <h3 className=\"text-xl font-bold text-gray-800\">Generate Summary</h3>\n                    <div className=\"flex flex-wrap gap-2 mt-4\">\n                      <Button\n                        onClick={() => handleSummarize('brief')}\n                        data-testid=\"brief-summary-button\"\n                        disabled={summarizing}\n                        className=\"btn-primary text-white\"\n                      >\n                        <Sparkles className=\"w-4 h-4 mr-2\" />\n                        Brief Summary\n                      </Button>\n                      <Button\n                        onClick={() => handleSummarize('detailed')}\n                        data-testid=\"detailed-summary-button\"\n                        disabled={summarizing}\n                        className=\"btn-secondary text-white\"\n                      >\n                        <Sparkles className=\"w-4 h-4 mr-2\" />\n                        Detailed Summary\n                      </Button>\n                      <Button\n                        onClick={() => handleSummarize('custom')}\n                        data-testid=\"custom-summary-button\"\n                        disabled={summarizing}\n                        variant=\"outline\"\n                      >\n                        <Sparkles className=\"w-4 h-4 mr-2\" />\n                        Custom (200 words)\n                      </Button>\n                    </div>\n                  </CardHeader>\n                  <CardContent>\n                    {summarizing && (\n                      <div className=\"flex items-center justify-center py-8\">\n                        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600\"></div>\n                        <span className=\"ml-3 text-gray-600\">Generating summary...</span>\n                      </div>\n                    )}\n                    <div className=\"space-y-4\" data-testid=\"summaries-container\">\n                      {summaries.map((summary) => (\n                        <div\n                          key={summary.id}\n                          className=\"p-4 bg-white/50 rounded-lg border border-indigo-200\"\n                          data-testid={`summary-${summary.id}`}\n                        >\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <span className=\"text-sm font-semibold text-indigo-600 uppercase\">\n                              {summary.summary_type}\n                            </span>\n                            <div className=\"flex gap-2\">\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={() => speakText(summary.content)}\n                                data-testid={`speak-summary-${summary.id}`}\n                              >\n                                <Volume2 className=\"w-4 h-4\" />\n                              </Button>\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={() => exportSummary(summary)}\n                                data-testid={`export-summary-${summary.id}`}\n                              >\n                                <Download className=\"w-4 h-4\" />\n                              </Button>\n                            </div>\n                          </div>\n                          <p className=\"text-gray-700 whitespace-pre-wrap\">{summary.content}</p>\n                          <p className=\"text-xs text-gray-500 mt-2\">\n                            {new Date(summary.created_at).toLocaleString()}\n                          </p>\n                        </div>\n                      ))}\n                    </div>\n                  </CardContent>\n                </Card>\n              </TabsContent>\n\n              {/* Chat Tab */}\n              <TabsContent value=\"chat\">\n                <Card className=\"glass-effect shadow-xl\">\n                  <CardHeader>\n                    <h3 className=\"text-xl font-bold text-gray-800\">Chat with Document</h3>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-4 h-96 overflow-y-auto mb-4\" data-testid=\"chat-messages\">\n                      {chatMessages.map((msg, idx) => (\n                        <div key={idx} className=\"chat-message\">\n                          {msg.user && (\n                            <div className=\"flex justify-end mb-2\">\n                              <div className=\"bg-indigo-600 text-white px-4 py-2 rounded-2xl rounded-tr-sm max-w-md\" data-testid=\"user-message\">\n                                {msg.user}\n                              </div>\n                            </div>\n                          )}\n                          {msg.assistant && (\n                            <div className=\"flex justify-start mb-2\">\n                              <div className=\"bg-white/70 text-gray-800 px-4 py-2 rounded-2xl rounded-tl-sm max-w-md shadow-sm\" data-testid=\"assistant-message\">\n                                {msg.assistant}\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                      ))}\n                      <div ref={chatEndRef} />\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <Button\n                        onClick={isRecording ? stopRecording : startRecording}\n                        data-testid=\"voice-input-button\"\n                        variant=\"outline\"\n                        className={isRecording ? 'bg-red-100' : ''}\n                      >\n                        <Mic className={`w-4 h-4 ${isRecording ? 'text-red-600' : ''}`} />\n                      </Button>\n                      <Input\n                        value={chatMessage}\n                        onChange={(e) => setChatMessage(e.target.value)}\n                        onKeyPress={(e) => e.key === 'Enter' && handleChat(chatMessage)}\n                        placeholder=\"Ask a question about the document...\"\n                        data-testid=\"chat-input\"\n                        className=\"flex-1\"\n                      />\n                      <Button\n                        onClick={() => handleChat(chatMessage)}\n                        data-testid=\"send-chat-button\"\n                        className=\"btn-primary text-white\"\n                      >\n                        <Send className=\"w-4 h-4\" />\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              </TabsContent>\n            </Tabs>\n          </div>\n\n          {/* Right Panel - Document Info */}\n          <div className=\"space-y-6\">\n            <Card className=\"glass-effect shadow-xl\" data-testid=\"document-info\">\n              <CardHeader>\n                <h3 className=\"text-xl font-bold text-gray-800\">Document Info</h3>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <div>\n                  <p className=\"text-sm text-gray-600\">Filename</p>\n                  <p className=\"font-medium text-gray-800\">{pdf?.filename}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-600\">Pages</p>\n                  <p className=\"font-medium text-gray-800\">{pdf?.page_count}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-600\">Uploaded</p>\n                  <p className=\"font-medium text-gray-800\">\n                    {pdf?.upload_date && new Date(pdf.upload_date).toLocaleString()}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-600\">Size</p>\n                  <p className=\"font-medium text-gray-800\">\n                    {pdf?.file_size && (pdf.file_size / 1024).toFixed(2)} KB\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-600\">Status</p>\n                  <p className=\"font-medium text-green-600 capitalize\">{pdf?.status}</p>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card className=\"glass-effect shadow-xl\">\n              <CardHeader>\n                <h3 className=\"text-xl font-bold text-gray-800\">Document Preview</h3>\n              </CardHeader>\n              <CardContent>\n                <div className=\"bg-white/50 p-4 rounded-lg border border-indigo-200 max-h-96 overflow-y-auto\" data-testid=\"document-preview\">\n                  <p className=\"text-sm text-gray-700 whitespace-pre-wrap\">\n                    {pdf?.text_content?.substring(0, 1000)}...\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}