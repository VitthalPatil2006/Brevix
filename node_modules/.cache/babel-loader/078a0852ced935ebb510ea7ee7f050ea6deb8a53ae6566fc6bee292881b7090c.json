{"ast":null,"code":"import{useState,useEffect}from'react';import'@/App.css';import{BrowserRouter,Routes,Route,Navigate}from'react-router-dom';import axios from'axios';import AuthPage from'./pages/AuthPage';import Dashboard from'./pages/Dashboard';import PDFViewer from'./pages/PDFViewer';import{Toaster}from'./components/ui/sonner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;export const API=\"\".concat(BACKEND_URL,\"/api\");// Axios interceptor for auth\naxios.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;},error=>Promise.reject(error));function App(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{checkAuth();},[]);const checkAuth=async()=>{const token=localStorage.getItem('token');if(token){try{const response=await axios.get(\"\".concat(API,\"/auth/me\"));setUser(response.data);}catch(error){localStorage.removeItem('token');setUser(null);}}setLoading(false);};const handleLogout=()=>{localStorage.removeItem('token');setUser(null);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Toaster,{position:\"top-right\",richColors:true}),/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/auth\",element:!user?/*#__PURE__*/_jsx(AuthPage,{setUser:setUser}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:user?/*#__PURE__*/_jsx(Dashboard,{user:user,onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/auth\"})}),/*#__PURE__*/_jsx(Route,{path:\"/pdf/:pdfId\",element:user?/*#__PURE__*/_jsx(PDFViewer,{user:user,onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/auth\"})})]})})]});}export default App;","map":{"version":3,"names":["useState","useEffect","BrowserRouter","Routes","Route","Navigate","axios","AuthPage","Dashboard","PDFViewer","Toaster","jsx","_jsx","jsxs","_jsxs","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","API","concat","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","error","Promise","reject","App","user","setUser","loading","setLoading","checkAuth","response","get","data","removeItem","handleLogout","className","children","position","richColors","path","element","to","onLogout"],"sources":["C:/Brevix/frontend/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport '@/App.css';\nimport { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';\nimport axios from 'axios';\nimport AuthPage from './pages/AuthPage';\nimport Dashboard from './pages/Dashboard';\nimport PDFViewer from './pages/PDFViewer';\nimport { Toaster } from './components/ui/sonner';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nexport const API = `${BACKEND_URL}/api`;\n\n// Axios interceptor for auth\naxios.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    checkAuth();\n  }, []);\n\n  const checkAuth = async () => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      try {\n        const response = await axios.get(`${API}/auth/me`);\n        setUser(response.data);\n      } catch (error) {\n        localStorage.removeItem('token');\n        setUser(null);\n      }\n    }\n    setLoading(false);\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    setUser(null);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"App\">\n      <Toaster position=\"top-right\" richColors />\n      <BrowserRouter>\n        <Routes>\n          <Route\n            path=\"/auth\"\n            element={!user ? <AuthPage setUser={setUser} /> : <Navigate to=\"/\" />}\n          />\n          <Route\n            path=\"/\"\n            element={user ? <Dashboard user={user} onLogout={handleLogout} /> : <Navigate to=\"/auth\" />}\n          />\n          <Route\n            path=\"/pdf/:pdfId\"\n            element={user ? <PDFViewer user={user} onLogout={handleLogout} /> : <Navigate to=\"/auth\" />}\n          />\n        </Routes>\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}